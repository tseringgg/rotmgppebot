function initializeWikiPage(i,t){var n={};$.each(t,function(){n[this[0]]=this[1]}),$("#"+i+" a").each(function(){var i,t=$(this),e=t.attr("href");e&&(/^\/wiki/.test(e)?(e=e.replace(/[?#].*$/,""),(i=n[e])?t.attr("title",i):t.addClass("missing-wiki-page").attr("title","Missing wiki page")):/^#/.test(e)||(/^\s*$/.test(t.text())||t.addClass("external"),t.attr("title"))||t.attr("title","External link"))})}function initializeDeleteWikiPageLink(i,t){initializeModal(i,"delete-modal",t,"#")}function initializeRestoreWikiPageLink(i,t){initializeModal(i,"revert-modal",t,"/")}function initializeLockPageLink(i,t){var i=$("#"+i),e=$("#lock-modal"),n=e.find(".alert-danger");i.click(function(){e.modal("show")}),e.find("button").click(function(){var e=window.location.href;callSpec(t).done(function(i){var t;i[0]?(t=e.lastIndexOf("#"),window.location.href=e.slice(0,t)):n.text(i[1]).removeClass("hide")})})}function initializeModal(i,t,n,a){$("#"+i);var e=$("#"+t),o=e.find(":input[name=comment]"),l=e.find(".alert-danger");$("#"+i).click(function(){e.modal("show")}),e.find("button").click(function(){var e=window.location.href;callSpec(n,{comment:o.val()}).done(function(i){var t;i[0]?(t=e.lastIndexOf(a),window.location.href=e.slice(0,t)):l.text(i[1]).removeClass("hide")})})}function initializeWikiSearch(i,t,n){var a,i=$("#"+i);i.select2({minimumInputLength:2,placeholder:"Wiki search",ajax:$.extend(t,{dataType:"json",quietMillis:400,data:function(i){return a=i,completeData({title:i})},results:function(i,t){var e=[{id:n+"?q="+encodeURIComponent(a),text:"Search for: "+a}];return{results:e=i[0]?e.concat($.map(i[1],function(i){return{id:i[0],text:"Go to: "+i[1]}})):e}}})}),i.on("change.select2",function(i){window.location.href=i.val})}